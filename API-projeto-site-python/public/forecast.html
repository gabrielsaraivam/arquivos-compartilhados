<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overall</title>

     <!-- script do google charts -->
     <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
     <script type="text/javascript" src="./funcoes.js"></script>
     <script type="text/javascript" src="./funcoesCargo.js"></script>
     <script type="text/javascript" src="./funcoesLocalizacao.js"></script>
 
     <!-- scripts do Chart.js -->
     <script type="text/javascript" src="https://www.chartjs.org/dist/2.8.0/Chart.min.js"></script>

     <link rel="sortcut icon" href="./img/logo.png" type="image/x-icon"/>

    <script src="./js/bootstrap.js"></script>
    <link rel="stylesheet" href="./css/bootstrap.css">
    <link rel="stylesheet" href="./styleDash.css">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
		
		<script src="https://kit.fontawesome.com/fee5906543.js" crossorigin="anonymous"></script>
		<link rel="stylesheet" href="./cssSB/style.css">


</head>
<body>
  
    <div class="wrapper d-flex align-items-stretch">
      <nav id="sidebar" class="menu">
        <div class="custom-menu">
          <button type="button" id="sidebarCollapse" class="btn btn-primary">
            <i class="fa fa-bars"></i>
            <span class="sr-only">Toggle Menu</span>
          </button>
        </div>
        <div class="" >
          <h1 class="p-4"><a href="index.html" id="imgLogo"><img src="./img/logo-black.png" alt=""></a></h1>
          <ul class="list-unstyled components mb-5">
            <li class="pl-4 pr-4">
              <a href="dashboardPython.html"><span class="fa fa-server mr-3"></span>Servidores</a>
            </li>

            <li class="pl-4 pr-4 li-active">
              <a href="forecast.html" target=""><span class="fa fa-chart-line mr-3"></span>Forecast</a>
            </li>
            <!-- <li class="pl-4 pr-4">
              <a href="#"><span class="fab fa-aws mr-3"></span>Billing</a>
            </li> -->
            <li class="pl-4 pr-4">
              <a href="#" onclick="logoff()"><span class="fa fas fa-sign-out-alt mr-3"></span>Logoff</a>
            </li>
          </ul>

          <div class="footer">
            <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
              <!-- Copyright &copy;2021</a> -->
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
          </div>

        </div>
      </nav>

      <!-- <div class="container">
        <div class="container">
          <div class="row">
            <div class="col-lg-12 col-md-12" style="background-color: red;"></div>
          </div>
        </div> -->

        <script>

          // localStorage.setItem('name', 'Treinaweb');
          // localStorage['name'] = 'Treinaweb';
          // alert(localStorage['name']);

          function verificar_autenticacao() {
              nome_usuario = sessionStorage.nome_usuario_meuapp;
              id_usuario = sessionStorage.id_usuario_meuapp;
              senha_usuario = sessionStorage.senha_usuario_meuapp;

              if (nome_usuario == undefined)  {
                  redirecionar_login();
              } else {
                  usuario.innerHTML = nome_usuario;
                  // validar_sessao();
              }

          }
                   
        </script>

        <div id="content" class="p-4 p-md-5 pt-5">
          <div class="row container col-md-12 col-lg-12 col-sm-12 col-xs-12 col-xl-12 border-bottom">
            <h6 class="mr-auto" id="hCargo">Administração</h6>
            <h6 id="usuario" class="ml-auto">Overall</h6>
          </div>

          <div class="row mt-2 container col-12">
            <h2 class="color-text">Forecast de recursos computacionais</h2>
            <div class="col-7  col-sm-4 col-md-4 col-lg-3 ml-auto p-0 pt-2" >
              <div class="col-12 p-0">
                <label class="col-5 col-sm-7 col-lg-5 p-0 row ml-auto">
                  <input type="checkbox" id="switch"> 
                  <div style="height: 3vh;">
                    <span class="fa fa-sun-o"></span>
                  </div>
                  <div class="check col-6 ml-2 mr-2"></div> 
                  <div style="height: 3vh;">
                    <span class="fa fa-moon-o"></span>
                  </div>
                </label>
              </div>
            </div>
          </div>

          <div class="row container col-6">
            <!-- <div class="dropdown mr-auto col-5">
              <button class="btn btn-secondary dropdown-toggle col-12" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <span id="mudarMaquina">Máquina</span>
              </button>
              <div class="dropdown-menu" id="dropdownMaquina" aria-labelledby="dropdownMenuButton">
                <option class="dropdown-item" onclick="chamarMaquina(1)">Máquina 1</option>
                <option class="dropdown-item" onclick="chamarMaquina(2)">Máquina 2</option>
                <option class="dropdown-item" onclick="chamarMaquina(3)">Máquina 3</option>
              </div>
            </div> -->
          </div>

          <!-- <div class="row container col-12 p-0 mb-2">
            
            <div class=" mt-2 col-md-6 col-lg-6 col-sm-6 col-xl-6 mr-auto rounded">
              <div class="col-12 col-md-12 col-lg-12 col-sm-12 col-xl-12 rounded  divs-graphcs-big">
                  <canvas id="canvas_grafico_disco"></canvas>
              </div>
            </div>

            <div class=" mt-2 col-md-6 col-lg-6 col-sm-6 col-xl-6" >
              <div class="col-12 col-md-12 col-lg-12 col-sm-12 col-xl-12 rounded divs-graphcs-big" >
                <canvas id="canvas_grafico_memoria"></canvas>
              </div>
            </div>   
          </div> -->

          <div class="row container col-12 p-0 mb-2">
            
            <div class=" mt-2 col-md-8 col-lg-8 col-sm-8 col-xl-8 mr-auto rounded">
              <!-- <div class="col-12 col-md-12 col-lg-12 col-sm-12 col-xl-12 rounded  divs-graphcs-big"> -->
                  <!-- <canvas style="height: 100vh;" id="canvas_grafico_billing"></canvas> -->
                  <div class="card">
                    <div class="card-header" id="cores-cards-header">
                      Fundamentação
                    </div>
                    <div class="card-body cores-cards-body">
                      <blockquote class="blockquote mb-0">
                        <p>Foi realizada uma coleta de dados de 20h de um servidor para prever as próximas 8h de uso de memória e quantidade de processos ativos. Essa previsão é importante pois permite determinar com uma certa antecedência qual será o uso de recursos nesta máquina, identificar possíveis gargalos e embasar a tomada de decisões baseada em dados.</p>
                        <footer class="blockquote-footer">Forecast realizado por <cite title="Source Title">Overall Monitoramentos</cite></footer>
                      </blockquote>
                    </div>
                  </div>
              </div>
            <!-- </div> -->
            <!-- <div class="col-md-1 col-lg-1" style="background-color: red; height: 1%;"></div> -->
            <div class=" mt-2 col-md-4 col-lg-4 col-sm-4 col-xl-4" >
              <div class="card border-dark mb-3" style="max-width: 18rem;">
                <div class="card-header" id="cores-cards-header">Uso de memória (%) - em 8h</div>
                <div class="card-body text-dark cores-cards-body">
                  <h5 class="card-title">61.4%</h5>
                  <p class="card-text">*Uso estimado</p>
                </div>
              </div>
              <div class="card border-dark mb-3" style="max-width: 18rem;">
                <div class="card-header" id="cores-cards-header">Processos ativos - em 8h</div>
                <div class="card-body text-dark cores-cards-body">
                  <h5 class="card-title">468</h5>
                  <p class="card-text">*Quantidade estimada</p>
                </div>
              </div>
            </div>   
          </div>

          <div class="row container col-12 p-0">
            <div class="mt-3 mb-0 col-md-6 col-lg-6 col-sm-6 col-xl-6 mr-auto rounded">
              <div class="col-12 col-md-12 col-lg-12 col-sm-12 col-xl-12 rounded" >
                <!-- <canvas id="canvas_grafico_cpu"></canvas> -->
                <a href="./AWS-Billing-and-Cost-Management.pdf" download="AWS_billing"><button class="btn btn-dark mx-auto" type="submit">Faça download do report</button></a>
              </div>
            </div>
      
          <!-- <div class="row container col-12 p-0">
            <div class="mt-3 mb-0 col-md-6 col-lg-6 col-sm-6 col-xl-6 mr-auto rounded">
              <div class="col-12 col-md-12 col-lg-12 col-sm-12 col-xl-12 rounded divs-graphcs-small" >
                <canvas id="canvas_grafico_cpu"></canvas>
              </div>
            </div>
            <div class="mt-3 col-md-6 col-lg-6 col-sm-6 col-xl-6" >
              <div class="col-12 col-md-12 col-lg-12 col-sm-12 col-xl-12 rounded divs-graphcs-small" style="position: relative; height: 100%;">
                <canvas id="canvas_grafico_processos"></canvas>
              </div>
            </div>   
          </div> -->
        </div>
      </div>
    </div>
  
</body>
</html>

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.1/dist/js.cookie.min.js"></script>

<!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" crossorigin="anonymous"></script> -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


<script src="./jsSb/jquery.min.js"></script>
<script src="./jsSb/popper.js"></script>
<!-- <script src="./jsSb/bootstrap.min.js"></script> -->
<script src="./jsSb/main.js"></script>

<!-- max-width: 991.98px -->



<script>

  window.addEventListener('resize', function ajustarSideBar() {
    //var altura = window.innerHeight;
    var largura = window.innerWidth;

    if (largura < 1258) 
        // document.getElementsByClassName('menu')[0].className = 'responsivemenu';
        sidebar.style = "position: fixed; z-index: 9999; height: 100%;"

    else sidebar.style = ""
});

$(document).ready(function() {
  var largura = $(window).width();

  if (largura < 1258) 
        // document.getElementsByClassName('menu')[0].className = 'responsivemenu';
        sidebar.style = "position: fixed; z-index: 9999; height: 100%;"

    else sidebar.style = ""
});

const $html = document.querySelector('html')
    const $checkbox = document.querySelector('#switch')

    $checkbox.addEventListener('change', function(){
        $html.classList.toggle('dark-mode')
    })
</script>


<script>
  var otherCheckbox = document.querySelector ('#switch');

 otherCheckbox.onchange = function () {
  if (otherCheckbox.checked) {
    imgLogo.innerHTML=`<img src="./img/logo-white.png" alt="aa">`
  } else{
    imgLogo.innerHTML=`<img src="./img/logo-black.png" alt="aa">`
  }
};
</script>

<!-- $(document).ready(function() {
  var largura = $(window).width();

  if (largura < 940.98) 
        // document.getElementsByClassName('menu')[0].className = 'responsivemenu';
        sidebar.style = "position: absolute; z-index: 9999; height: 100vh;"

    else sidebar.style = ""
}); -->

<!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->

<script>

var ctx = document.getElementById('canvas_grafico_disco').getContext("2d");

var gradientFill = ctx.createLinearGradient(0, 0, 0, 200);
gradientFill.addColorStop(1, "#1c84e900");
gradientFill.addColorStop(0, "#1c84e9");


//   const data = {
// labels: [
//   'Janeiro',
//   'Fevereiro',
//   'Março',
//   'Abril'
// ],
// datasets: [{
//   label: 'Disco',
//   data: [2.75, 2, 3.6, 2],
//   fill: true,
//   borderColor: '#1c84e9',
//   backgroundColor: gradientFill,
//   tension: 0.3
// }]
// };

// const config = {
// type: 'line',
// data: data,
// options: {
//   indexAxis: 'x',
//   scales: {
//     y: {
//       beginAtZero: true
//     }
//   }
// }
// };


// var myChart = new Chart(
//   document.getElementById('myChart'),
//   config
// );

// ----------------

// const data2 = {
//   labels: [
//     'Igor V.',
//     'Reinaldo',
//     'Dani Alves'
//   ],
//   datasets: [{
//     label: 'My First Dataset',
//     data: [6, 4, 4],
//     backgroundColor: [
//       '#1c84e9',
//       '#0876ee99',
//       '#1c84e950'
//     ],
//     hoverOffset: 4,
//     borderColor: '#ffffff00'
//   }]
// };

// const config2 = {
//   type: 'bar',
//   data: data2,
// };


// var myChart2 = new Chart(
//     document.getElementById('myChart2'),
//     config2
// );

// ----

// const data3 = {
//   labels: [
//     'Alerta Máquina 1',
//     'Alerta Máquina 2',
//     'Alerta Máquina 3'
//   ],
//   datasets: [{
//     label: 'My First Dataset',
//     data: [6, 4, 3],
//     backgroundColor: [
//       '#1c84e9',
//       '#0876ee99',
//       '#1c84e950'
//     ],

//     borderColor: '#ffffff00'
//   }]
// };

// const config3 = {
//   type: 'polarArea',
//   data: data3,
// };


// var myChart3 = new Chart(
//     document.getElementById('myChart3'),
//     config3
// );
</script>


<!-- ssssssssssssssssss -->

<script>

// function consultarMaquina(){
              
//   for(var i = 1;i<=Cookies.get('qtdLocalizacao');i++){
//     dropdownMaquina.innerHTML+=`<option class="dropdown-item" onclick="chamarMaquina(${i})">Máquina ${i}</option>`
//   }
// }

function chamarMaquina(valor){
  mudarMaquina.innerHTML = `Máquina ${valor}`
  obterDadosGraficoPrimeiraVez(valor)
}

  // let proximaAtualizacaoCPU;
  let proximaAtualizacaoMemoria;
  let proximaAtualizacaoCPU;
  let proximaAtualizacaoDisco;
  let proximaAtualizacaoProcessos;

  window.onload = inicializacao();

  function inicializacao(){
    verificarCargo();
    // getLocalizacao();
    // consultarMaquina();
    obterDadosGraficoPrimeiraVez(1);
  }
  // chamargraficos(1);

  // function alterarCoresBotoes(idCaixaEletronico) {
  //     console.log("executei alterarCoresBotoes")
  //     botaoCaminhao1.className = "btn"
  //     botaoCaminhao2.className = "btn"
  //     botaoCaminhao3.className = "btn"
  //     botaoCaminhao4.className = "btn"

  //     if (idCaixaEletronico == "1") {
  //         botaoCaminhao1.className += " btn-now"
  //     } else if (idCaixaEletronico == "2") {
  //         botaoCaminhao2.className += " btn-now"
  //     } else if (idCaixaEletronico == "3") {
  //         botaoCaminhao3.className += " btn-now"
  //     } else if (idCaixaEletronico == "4") {
  //         botaoCaminhao4.className += " btn-now"
  //     }
  // }


  function chamargraficos(idServidor) {
      console.log("executei chamargraficos")
      obterDadosGraficoPrimeiraVez(idServidor)
      // atualizarGraficoCPU(idCaixaEletronico)

      // alterarCoresBotoes(idCaixaEletronico);

  }

  // verificar_autenticacao();

  function configurarGraficoMemoria() {
      console.log('chegaste no configurar')
      var configuracoesMemoria = {
          responsive: true,
          animation: { duration: 500 },
          hoverMode: 'index',
          stacked: false,
          title: {
              display: true,
              text: 'Percentual de uso da Memória'
          },
          scales: {
              yAxes: [{
                  type: 'linear', 
                  display: true,
                  position: 'left',
                  id: 'y-memoria',
              } 
              
            ],
          }
      };
      console.log("executei configurarGraficoMemoria")
      return configuracoesMemoria;
      
  }

  // CPU

  function configurarGraficoCPU() {
      console.log('chegaste no configurar')
      var configuracoesCPU = {
          responsive: true,
          animation: { duration: 500 },
          hoverMode: 'index',
          stacked: false,
          title: {
              display: true,
              text: 'Percentual de uso da CPU'
          },
          scales: {
              yAxes: [{
                  type: 'linear', 
                  display: true,
                  position: 'left',
                  id: 'y-cpu',
              } 
              
            ],
          }
      };
      console.log("executei configurarGraficoCPU")
      return configuracoesCPU;
      
  }

  function configurarGraficoDisco() {
      console.log('chegaste no configurar')
      var configuracoesDisco = {
          responsive: true,
          animation: { duration: 500 },
          hoverMode: 'index',
          stacked: false,
          title: {
              display: true,
              text: 'Percentual de uso do Disco'
          },
          scales: {
              yAxes: [{
                  type: 'linear', 
                  display: true,
                  position: 'left',
                  id: 'y-disco',
              } 
              
            ],
          }
      };
      console.log("executei configurarGraficoDisco")
      return configuracoesDisco;
      
  }


  function configurarGraficoProcessos() {
      console.log('chegaste no configurar')
      var configuracoesProcessos = {
          responsive: true,
          animation: { duration: 500 },
          hoverMode: 'index',
          stacked: false,
          title: {
              display: true,
              text: 'Quantidade de processos ativos'
          },
          scales: {
              yAxes: [{
                  type: 'linear', 
                  display: true,
                  position: 'left',
                  id: 'y-processos',
              } 
              
            ],
          }
      };
      console.log("executei configurarGraficoProcessos")
      return configuracoesProcessos;
      
  }


  // altere aqui como os dados serão exibidos
  // e como são recuperados do BackEnd
  function obterDadosGraficoPrimeiraVez(idServidor) {
      console.log("executei obterDadosGraficoPrimeiraVez")
      // alterarCoresBotoes(idCaixaEletronico);

      if (proximaAtualizacaoMemoria != undefined) {
          clearTimeout(proximaAtualizacaoMemoria);
      }

      if (proximaAtualizacaoCPU != undefined) {
          clearTimeout(proximaAtualizacaoCPU);
      }

      if (proximaAtualizacaoDisco != undefined) {
          clearTimeout(proximaAtualizacaoDisco);
      }

      if (proximaAtualizacaoProcessos != undefined) {
          clearTimeout(proximaAtualizacaoDisco);
      }

    var id_usuario = sessionStorage.id_usuario_meuapp;
    var cargo = sessionStorage.cargo_usuario_meuapp;
    var fkEmpresa = sessionStorage.fkEmpresa_usuario_meuapp;
    if(cargo == "Gerente" || cargo == "Analista"){
      id_usuario = fkEmpresa;
    }
          /// MEMORIA ------ MEMORIA ------------- MEMORIA
          fetch(`/tblDadosServidor/ultimasMemoria/${idServidor}`, { cache: 'no-store' }).then(function (response) {
          if (response.ok) {
              response.json().then(function (resposta) {
                  console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                  // alert(`Dados recebidos: ${JSON.stringify(resposta)}`);
                  resposta.reverse();

                  var gradientFill = ctx.createLinearGradient(0, 0, 0, 200);
                  gradientFill.addColorStop(1, "#1c84e900");
                  gradientFill.addColorStop(0, "#1c84e9");

                  var dados = {
                      labels: [],
                      datasets: [
                          {
                              yAxisID: 'y-memoria',
                              label: 'Memória',
                              fill: true,
                              borderColor: '#1c84e9',
                              backgroundColor: gradientFill,
                              data: []
                          },
                      ]
                  };
                  for (i = 0; i < resposta.length; i++) {
                      var registro = resposta[i];
                      dados.labels.push(registro.dataHora_grafico);
                      dados.datasets[0].data.push(registro.memoria);
                      // dados.datasets[1].data.push(registro.memoria);

                  }
                  console.log(JSON.stringify(dados));
                  // div_aguarde.style.display = 'none';
                  console.log(dados, idServidor)
                  plotarGraficoMemoria(dados, idServidor);
              });
          } else {
              console.error('Nenhum dado encontrado ou erro na API');
          }
      })
          .catch(function (error) {
              console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
          });

          // CPU

          fetch(`/tblDadosServidor/ultimasCPU/${idServidor}`, { cache: 'no-store' }).then(function (response) {
          if (response.ok) {
              response.json().then(function (resposta) {
                  console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                  // alert(`Dados recebidos: ${JSON.stringify(resposta)}`);
                  resposta.reverse();

                  var gradientFill = ctx.createLinearGradient(0, 0, 0, 200);
                  gradientFill.addColorStop(1, "#1c84e900");
                  gradientFill.addColorStop(0, "#1c84e9");

                  var dados = {
                      labels: [],
                      datasets: [
                          {
                              yAxisID: 'y-cpu',
                              label: 'CPU',
                              fill: true,
                              borderColor: '#1c84e9',
                              backgroundColor: gradientFill,
                              data: []
                          },
                      ]
                  };
                  for (i = 0; i < resposta.length; i++) {
                      var registro = resposta[i];
                      dados.labels.push(registro.dataHora_grafico);
                      dados.datasets[0].data.push(registro.cpu);
                      // dados.datasets[1].data.push(registro.memoria);

                  }
                  console.log(JSON.stringify(dados));
                  // div_aguarde.style.display = 'none';
                  console.log(dados, idServidor)
                  plotarGraficoCPU(dados, idServidor);
              });
          } else {
              console.error('Nenhum dado encontrado ou erro na API');
          }
      })
          .catch(function (error) {
              console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
          });


  fetch(`/tblDadosServidor/ultimasDisco/${idServidor}`, { cache: 'no-store' }).then(function (response) {
          if (response.ok) {
              response.json().then(function (resposta) {
                  console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                  // alert(`Dados recebidos: ${JSON.stringify(resposta)}`);
                  resposta.reverse();

                  var gradientFill = ctx.createLinearGradient(0, 0, 0, 200);
                  gradientFill.addColorStop(1, "#1c84e900");
                  gradientFill.addColorStop(0, "#1c84e9");

                  var dados = {
                      labels: [],
                      datasets: [
                          {
                              yAxisID: 'y-disco',
                              label: 'Disco',
                              fill: true,
                              borderColor: '#1c84e9',
                              backgroundColor: gradientFill,
                              data: []
                          },
                      ]
                  };
                  for (i = 0; i < resposta.length; i++) {
                      var registro = resposta[i];
                      dados.labels.push(registro.dataHora_grafico);
                      dados.datasets[0].data.push(registro.disco);
                      // dados.datasets[1].data.push(registro.memoria);

                  }
                  console.log(JSON.stringify(dados));
                  // div_aguarde.style.display = 'none';
                  console.log(dados, idServidor)
                  plotarGraficoDisco(dados, idServidor);
              });
          } else {
              console.error('Nenhum dado encontrado ou erro na API');
          }
      })
          .catch(function (error) {
              console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
          });


          fetch(`/tblDadosServidor/ultimasProcessos/${idServidor}`, { cache: 'no-store' }).then(function (response) {
          if (response.ok) {
              response.json().then(function (resposta) {
                  console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
                  // alert(`Dados recebidos: ${JSON.stringify(resposta)}`);
                  resposta.reverse();

                  var gradientFill = ctx.createLinearGradient(0, 0, 0, 200);
                  gradientFill.addColorStop(1, "#1c84e900");
                  gradientFill.addColorStop(0, "#1c84e9");

                  var dados = {
                      labels: [],
                      datasets: [
                          {
                              yAxisID: 'y-processos',
                              label: 'Processos',
                              fill: true,
                              borderColor: '#1c84e9',
                              backgroundColor: gradientFill,
                              data: []
                          },
                      ]
                  };
                  for (i = 0; i < resposta.length; i++) {
                      var registro = resposta[i];
                      dados.labels.push(registro.dataHora_grafico);
                      dados.datasets[0].data.push(registro.processosAtivos);
                      // dados.datasets[1].data.push(registro.memoria);

                  }
                  console.log(JSON.stringify(dados));
                  // div_aguarde.style.display = 'none';
                  console.log(dados, idServidor)
                  plotarGraficoProcessos(dados, idServidor);
              });
          } else {
              console.error('Nenhum dado encontrado ou erro na API');
          }
      })
          .catch(function (error) {
              console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
          });

  }



  // só mexer se quiser alterar o tempo de atualização
  // ou se souber o que está fazendo!
 
  function atualizarGraficoMemoria(idServidor, dados){
    fetch(`/tblDadosServidor/tempo-real-memoria/${idServidor}`, { cache: 'no-store' }).then(function (response) {
          console.log("Estou tentando pegar idServidor = ", idServidor)
          if (response.ok) {
              response.json().then(function (novoRegistro) {
                  console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
                  console.log(`Dados atuais do gráfico: ${dados}`);

                  if ( dados.datasets[0].data.length == 4){
                        dados.labels.shift();
                        dados.datasets[0].data.shift();
                        //dados.datasets[1].data.shift();
                        
                    }
                    // tirando e colocando valores no gráfico
                    // dados.labels.shift(); // apagar o primeiro
                    dados.labels.push(novoRegistro.dataHora_grafico); // incluir um novo dataHora
                    // dados.datasets[0].data.shift();  // apagar o primeiro de cpu
                    // dados.datasets[1].data.shift();  // apagar o primeiro de memoria
                    dados.datasets[0].data.push(novoRegistro.memoria); // incluir uma nova tblDadosHardware de cpu
                    // dados.datasets[1].data.push(novoRegistro.memoria); // incluir uma nova tblDadosHardware de memoria
                    console.log("meu sensor é o " + idServidor)

                    window.grafico_linhaMemoria.update();


                    proximaAtualizacaoMemoria = setTimeout(() => atualizarGraficoMemoria(idServidor, dados), 20000);
              });
          } else {
              console.error('Nenhum dado encontrado ou erro na API');
              proximaAtualizacaoMemoria = setTimeout(() => atualizarGraficoMemoria(idServidor, dados), 20000);
          }
      })
          .catch(function (error) {
              console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
          });

  }

  // cpu

  function atualizarGraficoCPU(idServidor, dados){
    fetch(`/tblDadosServidor/tempo-real-cpu/${idServidor}`, { cache: 'no-store' }).then(function (response) {
          console.log("Estou tentando pegar idServidor = ", idServidor)
          if (response.ok) {
              response.json().then(function (novoRegistro) {
                  console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
                  console.log(`Dados atuais do gráfico: ${dados}`);

                  if ( dados.datasets[0].data.length == 4){
                        dados.labels.shift();
                        dados.datasets[0].data.shift();
                        //dados.datasets[1].data.shift();
                        
                    }
                    // tirando e colocando valores no gráfico
                    // dados.labels.shift(); // apagar o primeiro
                    dados.labels.push(novoRegistro.dataHora_grafico); // incluir um novo dataHora
                    // dados.datasets[0].data.shift();  // apagar o primeiro de cpu
                    // dados.datasets[1].data.shift();  // apagar o primeiro de memoria
                    dados.datasets[0].data.push(novoRegistro.cpu); // incluir uma nova tblDadosHardware de cpu
                    // dados.datasets[1].data.push(novoRegistro.memoria); // incluir uma nova tblDadosHardware de memoria
                    console.log("meu sensor é o " + idServidor)

                    window.grafico_linhaCPU.update();


                    proximaAtualizacaoCPU = setTimeout(() => atualizarGraficoCPU(idServidor, dados), 20000);
              });
          } else {
              console.error('Nenhum dado encontrado ou erro na API');
              proximaAtualizacaoCPU = setTimeout(() => atualizarGraficoCPU(idServidor, dados), 20000);
          }
      })
          .catch(function (error) {
              console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
          });

  }


  function atualizarGraficoDisco(idServidor, dados){
    fetch(`/tblDadosServidor/tempo-real-disco/${idServidor}`, { cache: 'no-store' }).then(function (response) {
          console.log("Estou tentando pegar idServidor = ", idServidor)
          if (response.ok) {
              response.json().then(function (novoRegistro) {
                  console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
                  console.log(`Dados atuais do gráfico: ${dados}`);

                  if ( dados.datasets[0].data.length == 4){
                        dados.labels.shift();
                        dados.datasets[0].data.shift();
                        //dados.datasets[1].data.shift();
                        
                    }
                    // tirando e colocando valores no gráfico
                    // dados.labels.shift(); // apagar o primeiro
                    dados.labels.push(novoRegistro.dataHora_grafico); // incluir um novo dataHora
                    // dados.datasets[0].data.shift();  // apagar o primeiro de cpu
                    // dados.datasets[1].data.shift();  // apagar o primeiro de memoria
                    dados.datasets[0].data.push(novoRegistro.disco); // incluir uma nova tblDadosHardware de cpu
                    // dados.datasets[1].data.push(novoRegistro.memoria); // incluir uma nova tblDadosHardware de memoria
                    console.log("meu sensor é o " + idServidor)

                    window.grafico_linhaDisco.update();


                    proximaAtualizacaoDisco = setTimeout(() => atualizarGraficoDisco(idServidor, dados), 20000);
              });
          } else {
              console.error('Nenhum dado encontrado ou erro na API');
              proximaAtualizacaoDisco = setTimeout(() => atualizarGraficoDisco(idServidor, dados), 20000);
          }
      })
          .catch(function (error) {
              console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
          });

  }


  function atualizarGraficoProcessos(idServidor, dados){
    fetch(`/tblDadosServidor/tempo-real-processos/${idServidor}`, { cache: 'no-store' }).then(function (response) {
          console.log("Estou tentando pegar idServidor = ", idServidor)
          if (response.ok) {
              response.json().then(function (novoRegistro) {
                  console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
                  console.log(`Dados atuais do gráfico: ${dados}`);

                  if ( dados.datasets[0].data.length == 4){
                        dados.labels.shift();
                        dados.datasets[0].data.shift();
                        //dados.datasets[1].data.shift();
                        
                    }
                    // tirando e colocando valores no gráfico
                    // dados.labels.shift(); // apagar o primeiro
                    dados.labels.push(novoRegistro.dataHora_grafico); // incluir um novo dataHora
                    // dados.datasets[0].data.shift();  // apagar o primeiro de cpu
                    // dados.datasets[1].data.shift();  // apagar o primeiro de memoria
                    dados.datasets[0].data.push(novoRegistro.processosAtivos); // incluir uma nova tblDadosHardware de cpu
                    // dados.datasets[1].data.push(novoRegistro.memoria); // incluir uma nova tblDadosHardware de memoria
                    console.log("meu sensor é o " + idServidor)

                    window.grafico_linhaProcessos.update();


                    proximaAtualizacaoProcessos = setTimeout(() => atualizarGraficoProcessos(idServidor, dados), 20000);
              });
          } else {
              console.error('Nenhum dado encontrado ou erro na API');
              proximaAtualizacaoProcessos = setTimeout(() => atualizarGraficoProcessos(idServidor, dados), 20000);
          }
      })
          .catch(function (error) {
              console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
          });

  }
  // só altere aqui se souber o que está fazendo!

  function plotarGraficoMemoria(dados, idServidor) {
      console.log("executei plotarGraficoMemoria")
      console.log('iniciando plotagem do gráfico...');

      var ctx = canvas_grafico_memoria.getContext('2d');
      console.log('até aqui vai');
      console.log(dados.datasets);
      console.log(configurarGraficoMemoria())
      window.grafico_linhaMemoria = Chart.Line(ctx, {
          data: dados,
          options: configurarGraficoMemoria()
      });
      setTimeout(() => atualizarGraficoMemoria(idServidor, dados), 20000);

  }

  function plotarGraficoCPU(dados, idServidor) {
      console.log("executei plotarGraficoCPU")
      console.log('iniciando plotagem do gráfico...');

      var ctx = canvas_grafico_cpu.getContext('2d');
      console.log('até aqui vai');
      console.log(dados.datasets);
      console.log(configurarGraficoCPU())
      window.grafico_linhaCPU = Chart.Line(ctx, {
          data: dados,
          options: configurarGraficoCPU()
      });
      setTimeout(() => atualizarGraficoCPU(idServidor, dados), 20000);

  }

  function plotarGraficoDisco(dados, idServidor) {
      console.log("executei plotarGraficoDisco")
      console.log('iniciando plotagem do gráfico...');

      var ctx = canvas_grafico_disco.getContext('2d');
      console.log('até aqui vai');
      console.log(dados.datasets);
      console.log(configurarGraficoDisco())
      window.grafico_linhaDisco = Chart.Line(ctx, {
          data: dados,
          options: configurarGraficoDisco()
      });
      setTimeout(() => atualizarGraficoDisco(idServidor, dados), 20000);

  }

  function plotarGraficoProcessos(dados, idServidor) {
      console.log("executei plotarGraficoProcessos")
      console.log('iniciando plotagem do gráfico...');

      var ctx = canvas_grafico_processos.getContext('2d');
      console.log('até aqui vai');
      console.log(dados.datasets);
      console.log(configurarGraficoProcessos())
      window.grafico_linhaProcessos = Chart.Line(ctx, {
          data: dados,
          options: configurarGraficoProcessos()
      });
      setTimeout(() => atualizarGraficoProcessos(idServidor, dados), 20000);

  }


  // function sendData() {
  //     var http = new XMLHttpRequest();
  //     http.open('GET', 'http://localhost:9001/api/sendData', false);
  //     http.send(null);
  // }

    
  // Descomente abaixo se quiser inserir dados a cada X segundos
  // setInterval(() => {
  //     sendData();
  // }, 2000);

  // import Cookies from 'js-cookie'


</script>
